# Podcast Player with Translation

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº Electron å¼€å‘çš„æ’­å®¢æ’­æ”¾å™¨ï¼Œä¸“æ³¨äºæä¾›ä¼˜è´¨çš„éŸ³é¢‘æ’­æ”¾å’Œå®æ—¶ç¿»è¯‘ä½“éªŒã€‚é¡¹ç›®æœ€åˆæºäºæ»¡è¶³ä¸ªäººè®ºæ–‡é˜…è¯»éœ€æ±‚ï¼Œé€šè¿‡ Google NotebookLM ç”Ÿæˆè®ºæ–‡ç›¸å…³æ’­å®¢éŸ³é¢‘ï¼Œå¹¶æä¾›å®Œæ•´çš„éŸ³é¢‘æ’­æ”¾ã€å­—å¹•æ˜¾ç¤ºå’Œå®æ—¶ç¿»è¯‘åŠŸèƒ½ã€‚

## ğŸŒŸ ä¸»è¦ç‰¹æ€§

### ğŸµ éŸ³é¢‘æ’­æ”¾
- æ”¯æŒå¤šç§éŸ³é¢‘æ ¼å¼ï¼ˆMP3, WAV, AACç­‰ï¼‰
- æä¾›å®Œæ•´çš„æ’­æ”¾æ§åˆ¶ï¼šæ’­æ”¾/æš‚åœã€éŸ³é‡è°ƒèŠ‚ã€è¿›åº¦æ§åˆ¶
- æ”¯æŒå¿«è¿›/å¿«é€€å’Œæ’­æ”¾é€Ÿåº¦è°ƒèŠ‚
- è®°å¿†æ’­æ”¾ä½ç½®ï¼Œæ”¯æŒæ–­ç‚¹ç»­æ’­

### ğŸ“ å­—å¹•åŠŸèƒ½
- æ”¯æŒå®æ—¶éŸ³é¢‘è½¬å†™ï¼Œè‡ªåŠ¨ç”Ÿæˆå­—å¹•
- åŒè¯­å­—å¹•åŒæ­¥æ˜¾ç¤º
- å½“å‰æ’­æ”¾è¯å¥æ™ºèƒ½é«˜äº®

### ğŸŒ ç¿»è¯‘æœåŠ¡
- æ”¯æŒå¤šç§ç¿»è¯‘å¼•æ“ï¼š
  - Google ç¿»è¯‘ï¼šé€‚ç”¨äºé€šç”¨åœºæ™¯
  - SiliconCloud å¤§æ¨¡å‹ç¿»è¯‘ï¼šæä¾›æ›´å‡†ç¡®çš„ä¸“ä¸šé¢†åŸŸç¿»è¯‘
  - Ollama æœ¬åœ°æ¨¡å‹ç¿»è¯‘ï¼šæ”¯æŒç¦»çº¿ç¿»è¯‘ï¼Œæ— éœ€è”ç½‘
- å®æ—¶ç¿»è¯‘åŠŸèƒ½ï¼Œæ”¯æŒé€å¥ç¿»è¯‘
- å•è¯çº§åˆ«ç¿»è¯‘ï¼ˆåŒå‡»å•è¯è·å–é‡Šä¹‰ï¼‰
- æ™ºèƒ½ç¼“å­˜ç¿»è¯‘ç»“æœï¼Œæé«˜å“åº”é€Ÿåº¦

### ğŸ’¾ TTSè¯­éŸ³åˆæˆ
- æ”¯æŒä¸­æ–‡TTSæ’­æ”¾åŠŸèƒ½
- ä½¿ç”¨SiliconCloudçš„è¯­éŸ³åˆæˆæœåŠ¡
- æ”¯æŒè‡ªå®šä¹‰TTSæ¨¡å‹é€‰æ‹©
- é€å¥æ’­æ”¾ç¿»è¯‘åçš„ä¸­æ–‡å†…å®¹
- æ’­æ”¾æ—¶è‡ªåŠ¨é«˜äº®å½“å‰æœ—è¯»çš„å­—å¹•
- æ”¯æŒéšæ—¶åœæ­¢/ç»§ç»­æ’­æ”¾

### ğŸ’¾ æ•°æ®ç®¡ç†
- è‡ªåŠ¨ä¿å­˜æ’­æ”¾å†å²
- å­—å¹•æ–‡ä»¶æœ¬åœ°ç¼“å­˜
- æ”¯æŒéŸ³é¢‘æ–‡ä»¶ç®¡ç†
- æ”¯æŒå†å²è®°å½•æœç´¢å’Œè¿‡æ»¤

## ğŸ–¼ï¸ ç•Œé¢é¢„è§ˆ

### æ’­æ”¾å™¨ä¸»ç•Œé¢
![æ’­æ”¾å™¨ç•Œé¢](./data/demo-pic.png)

### åŠŸèƒ½æ¼”ç¤º
![æ¼”ç¤ºè§†é¢‘](./data/demo-video.gif)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 14.0.0
- npm >= 6.0.0
- macOS 10.15+ (ç›®å‰ä¸»è¦æ”¯æŒ macOS å¹³å°)

### å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/reilxlx/electron-podcast-player.git
cd electron-podcast-player
```

2. å®‰è£…å¹¶é…ç½® Ollamaï¼ˆmacOSï¼‰
```bash
# ä½¿ç”¨ Homebrew å®‰è£… Ollama
brew install ollama
# æˆ–è€…åœ¨ https://github.com/ollama/ollama ä¸‹è½½macosç‰ˆæœ¬çš„ollamaå®‰è£…åŒ…

# å¯åŠ¨ Ollama æœåŠ¡
ollama serve
ollama pull qwen2.5:0.5b    # é€šä¹‰åƒé—®2.5æ¨¡å‹ï¼Œæ”¯æŒä¸­è‹±ç¿»è¯‘ï¼Œå¯é€‰ç”¨å…¶ä»–æ¨¡å‹
```

å¯ä½¿ç”¨postmanæµ‹è¯•æ˜¯å¦å¤§æ¨¡å‹éƒ¨ç½²æˆåŠŸï¼Œè¯·æ±‚åœ°å€ï¼šhttp://localhost:11434/api/chat
```json
{
    "model": "qwen2.5:0.5b",
    "temperature": 0.7,
    "top_p": 0.9,
    "frequency_penalty": 0.2,
    "presence_penalty": 0.1,
    "max_tokens": 2048,
    "messages": [
        {
            "role": "system",
            "content": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç¿»è¯‘åŠ©æ‰‹ã€‚è¯·å°†ä»¥ä¸‹æ–‡æœ¬å‡†ç¡®æµç•…åœ°ç¿»è¯‘æˆä¸­æ–‡ï¼Œä¿æŒåŸæ–‡çš„è¯­æ°”å’Œé£æ ¼ã€‚åªè¿”å›ç¿»è¯‘ç»“æœï¼Œä¸è¦æœ‰ä»»ä½•è§£é‡Šæˆ–é¢å¤–çš„å†…å®¹ã€‚"
        },
        {
            "role": "user",
            "content": "Imagine fine tuning an LLM to be more creative by amplifying certain super activations or making it more analytical by suppressing others. It's like having a set of tuning knobs for different aspects of intelligence."
        }
    ],
    "stream": false
}
```
è‹¥è¾“å‡ºæ­£å¸¸è¿”å›ä¿¡æ¯ï¼Œåˆ™è¡¨æ˜ollamaæ¨¡å‹éƒ¨ç½²æˆåŠŸã€‚

3. å®‰è£…å¹¶é…ç½®whisper.cpp
```bash
# ä¸‹è½½whisper.cpp
git clone https://github.com/ggerganov/whisper.cpp.git
cd whisper.cpp
sh ./models/download-ggml-model.sh base.en
# build the project
cmake -B build
cmake --build build --config Release
# transcribe an audio file
./build/bin/whisper-cli -m models/ggml-base.en.bin -f audio/test.mp3

# ä»¥serveræ–¹å¼å¯åŠ¨whisper.cppæœåŠ¡
./build/bin/whisper-server -m ./models/ggml-base.en.bin --port 1123
```

ä½¿ç”¨postmanæµ‹è¯•æ˜¯å¦whisper.cppæœåŠ¡éƒ¨ç½²æˆåŠŸï¼Œè¯·æ±‚åœ°å€ï¼šhttp://localhost:1123/inference
![whisper.cppæµ‹è¯•](./data/whisper-test.png)


4. åˆ›å»ºå¿…è¦çš„ç›®å½•ç»“æ„
```bash
mkdir -p podcast_data/{audio,subtitles}
touch podcast_data/audio_index.json
touch podcast_data/config.json
```

5. é…ç½® API Keys
åœ¨ `podcast_data/config.json` ä¸­é…ç½®å¿…è¦çš„ API å¯†é’¥ï¼š
```json
{
  "asr_api_key": "your_asr_api_key_here",
  "silicon_cloud_api_key": "your_silicon_cloud_api_key_here",
  "silicon_cloud_model": "Qwen/Qwen2.5-7B-Instruct",
  "silicon_cloud_summary_model": "THUDM/glm-4-9b-chat",
  "silicon_cloud_TTS_name": "RVC-Boss/GPT-SoVITS",
  "ollama_model": "qwen2.5:0.5b"
}
```

API è·å–æ–¹å¼ï¼š
- AssemblyAI API Key: [https://www.assemblyai.com/](https://www.assemblyai.com/)
- SiliconCloud API Key: [https://cloud.siliconflow.cn/](https://cloud.siliconflow.cn/)

6. å®‰è£…ä¾èµ–
```bash
npm install --save-dev electron electron-builder
npm install assemblyai node-fetch@2
```

7. è¿è¡Œåº”ç”¨
```bash
# å¼€å‘ç¯å¢ƒ
npm start

# æ‰“åŒ… macOS åº”ç”¨
npm run build:mac
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æ“ä½œ
1. **æ·»åŠ éŸ³é¢‘**
   - ç‚¹å‡»ç•Œé¢ä¸­çš„"æ·»åŠ éŸ³é¢‘"åŒºåŸŸ
   - é€‰æ‹©æœ¬åœ°éŸ³é¢‘æ–‡ä»¶
   - æ”¯æŒæ‹–æ‹½æ–‡ä»¶å¯¼å…¥

2. **éŸ³é¢‘è½¬å†™**
   - å¯¼å…¥éŸ³é¢‘åè‡ªåŠ¨å¼€å§‹è½¬å†™
   - å³é”®ç‚¹å‡» Assembly è½¬å½•æŒ‰é’®å¯é…ç½® API Key
   - è½¬å†™å®Œæˆåè‡ªåŠ¨æ˜¾ç¤ºå­—å¹•

3. **ç¿»è¯‘è®¾ç½®**
   - ç•Œé¢é¡¶éƒ¨é€‰æ‹©ç¿»è¯‘å¼•æ“
   - å¯é€‰æ‹© Google ç¿»è¯‘ã€SiliconCloud æˆ– Ollama æœ¬åœ°ç¿»è¯‘
   - ä½¿ç”¨ Ollama ç¿»è¯‘æ—¶ç¡®ä¿æœ¬åœ°æœåŠ¡å·²å¯åŠ¨
   - å³é”®ç‚¹å‡»ç¿»è¯‘æŒ‰é’®å¯é…ç½®ç›¸åº”æœåŠ¡
   - æ”¯æŒå®æ—¶åˆ‡æ¢ç¿»è¯‘æœåŠ¡

4. **å­—å¹•äº’åŠ¨**
   - åŒå‡»å•è¯è·å–ç¿»è¯‘
   - å­—å¹•è‡ªåŠ¨è·ŸéšéŸ³é¢‘æ»šåŠ¨

5. **TTSæ’­æ”¾**
   - å³é”®ç‚¹å‡»"ä¸­æ–‡TTS"æŒ‰é’®
   - å¯é€‰æ‹©"è®¾ç½®æ¨¡å‹"é…ç½®TTSæ¨¡å‹
   - ç‚¹å‡»"TTSæ’­æ”¾"å¼€å§‹æœ—è¯»ä¸­æ–‡ç¿»è¯‘
   - å†æ¬¡ç‚¹å‡»å¯åœæ­¢æ’­æ”¾
   - æ’­æ”¾æ—¶è‡ªåŠ¨é«˜äº®å½“å‰æœ—è¯»å†…å®¹

## ğŸ”§ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ main.js                # Electron ä¸»è¿›ç¨‹
â”œâ”€â”€ preload.js            # é¢„åŠ è½½è„šæœ¬
â”œâ”€â”€ renderer/             # æ¸²æŸ“è¿›ç¨‹
â”‚   â”œâ”€â”€ index.html       # ä¸»ç•Œé¢
â”‚   â”œâ”€â”€ renderer.js      # æ¸²æŸ“é€»è¾‘
â”‚   â”œâ”€â”€ styles.css       # æ ·å¼è¡¨
â”‚   â””â”€â”€ ui.js            # UI äº¤äº’
â””â”€â”€ services/            # æ ¸å¿ƒæœåŠ¡
    â”œâ”€â”€ fileService.js        # æ–‡ä»¶å¤„ç†
    â”œâ”€â”€ player.js            # æ’­æ”¾æ§åˆ¶
    â”œâ”€â”€ subtitleParser.js    # å­—å¹•è§£æ
    â”œâ”€â”€ transcriptionService.js  # è¯­éŸ³è½¬å†™
    â”œâ”€â”€ translationService.js   # ç¿»è¯‘æœåŠ¡
    â”œâ”€â”€ ollamaTranslationService.js  # Ollamaæœ¬åœ°ç¿»è¯‘æœåŠ¡
    â”œâ”€â”€ summaryService.js      # å†…å®¹æ€»ç»“
    â””â”€â”€ ttsService.js         # TTSè¯­éŸ³åˆæˆ
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **API ä½¿ç”¨é™åˆ¶**
   - æ³¨æ„ API è°ƒç”¨é¢‘ç‡é™åˆ¶
   - å»ºè®®åˆç†ä½¿ç”¨ç¿»è¯‘ç¼“å­˜
   - å¤§æ–‡ä»¶è½¬å†™å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´
   - Ollama æœ¬åœ°ç¿»è¯‘æ— è°ƒç”¨é™åˆ¶ï¼Œä½†é¦–æ¬¡åŠ è½½æ¨¡å‹éœ€è¦ä¸€å®šæ—¶é—´

2. **Ollama ä½¿ç”¨è¯´æ˜**
   - ç¡®ä¿ç³»ç»Ÿå†…å­˜å……è¶³ï¼ˆå»ºè®® 16GB ä»¥ä¸Šï¼‰
   - é¦–æ¬¡ä½¿ç”¨æ—¶éœ€è¦ä¸‹è½½æ¨¡å‹ï¼Œå¤§å°çº¦ 4-8GB
   - æ¨¡å‹ä¸‹è½½å®Œæˆåæ”¯æŒç¦»çº¿ä½¿ç”¨
   - å¦‚é‡åˆ°ç¿»è¯‘è´¨é‡é—®é¢˜ï¼Œå¯å°è¯•åˆ‡æ¢ä¸åŒæ¨¡å‹
   - Ollama æœåŠ¡é»˜è®¤ç«¯å£ä¸º 11434ï¼Œç¡®ä¿æœªè¢«å ç”¨

3. **å…¼å®¹æ€§è¯´æ˜**
   - ç›®å‰ä¸»è¦æ”¯æŒ macOS å¹³å°
   - Ollama è¦æ±‚ macOS 12.0 æˆ–æ›´é«˜ç‰ˆæœ¬
   - éŸ³é¢‘æ ¼å¼å»ºè®®ä½¿ç”¨ MP3 æˆ– WAV

4. **æœ€ä½³å®è·µ**
   - å®šæœŸå¤‡ä»½é‡è¦çš„ç¿»è¯‘å’Œå­—å¹•æ•°æ®
   - ä½¿ç”¨é«˜è´¨é‡éŸ³é¢‘æºä»¥è·å¾—æ›´å¥½çš„è½¬å†™æ•ˆæœ
   - ä¼˜å…ˆä½¿ç”¨ Google NotebookLM ç”Ÿæˆçš„éŸ³é¢‘ä»¥è·å¾—æœ€ä½³ä½“éªŒ

## â­ æ”¯æŒé¡¹ç›®

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™ä¸ª Starâ­ï¼è¿™å°†é¼“åŠ±æˆ‘ä»¬æŒç»­æ”¹è¿›é¡¹ç›®